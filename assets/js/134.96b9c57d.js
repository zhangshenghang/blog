(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{612:function(s,a,t){"use strict";t.r(a);var n=t(20),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"elasticsearch安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch安装"}},[s._v("#")]),s._v(" ElasticSearch安装")]),s._v(" "),t("h2",{attrs:{id:"下载安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载安装包"}},[s._v("#")]),s._v(" 下载安装包")]),s._v(" "),t("p",[s._v("下载地址："),t("a",{attrs:{href:"https://www.elastic.co/cn/downloads/past-releases#elasticsearch",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/cn/downloads/past-releases#elasticsearch"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("安装版本：7.14.2")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/03/10/HaKxsF7pboE25lI.png",alt:"image-20230112094348092"}})]),s._v(" "),t("h2",{attrs:{id:"基础环境安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础环境安装"}},[s._v("#")]),s._v(" 基础环境安装")]),s._v(" "),t("h3",{attrs:{id:"jdk安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdk安装"}},[s._v("#")]),s._v(" JDK安装")]),s._v(" "),t("blockquote",[t("p",[s._v("安装es的机器都需要安装")]),s._v(" "),t("p",[s._v("JDK版本11")])]),s._v(" "),t("ul",[t("li",[s._v("将安装包移动到"),t("code",[s._v("/opt")]),s._v("目录下")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("tar -zxvf jdk-11.0.17_linux-x64_bin.tar.gz \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("JDK加入环境变量，进入jdk解压目录，一键设置")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export JAVA_HOME='")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PWD")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'; export PATH=$JAVA_HOME/bin:$PATH'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" -a /etc/profile "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"修改linux配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改linux配置"}},[s._v("#")]),s._v(" 修改Linux配置")]),s._v(" "),t("ul",[t("li",[s._v("编辑 /etc/security/limits.conf，追加以下内容")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("* soft nofile 65536\n* hard nofile 65536\n* hard memlock unlimited\n* soft memlock unlimited\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("在/etc/sysctl.conf文件最后添加一行")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("vm.max_map_count"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("262144")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("执行")]),s._v(" "),t("p",[t("code",[s._v("sysctl -p")])]),s._v(" "),t("ul",[t("li",[s._v("修改 /etc/systemd/system.conf")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/systemd/system.conf\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DefaultLimitMEMLOCK")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"安装es"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装es"}},[s._v("#")]),s._v(" 安装ES")]),s._v(" "),t("blockquote",[t("p",[s._v("需要安装es的集群都要执行以下步骤")])]),s._v(" "),t("ul",[t("li",[s._v("将安装包移动到"),t("code",[s._v("/opt")]),s._v("目录")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" elasticsearch-7.14.2-linux-x86_64.tar.gz /opt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("修改ES使用内存")])]),s._v(" "),t("p",[s._v("修改配置文件"),t("code",[s._v("config/jvm.options")])]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################################################")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## IMPORTANT: JVM heap size")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################################################")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## The heap size is automatically configured by Elasticsearch")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## based on the available memory in your system and the roles")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## each node is configured to fulfill. If specifying heap is")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## required, it should be done through a file in jvm.options.d,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## and the min and max should be set to the same value. For")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## example, to set the heap to 4 GB, create a new file in the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## jvm.options.d directory containing these lines:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -Xms4g")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -Xmx4g")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## See https://www.elastic.co/guide/en/elasticsearch/reference/current/heap-size.html")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## for more information")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################################################")]),s._v("\n-Xms25g\n-Xmx25g\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("ul",[t("li",[s._v("修改"),t("code",[s._v("elasticsearch.yml")]),s._v("配置")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cluster.name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dev"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cluster\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("node.name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("network.host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 10.0.0.107\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("transport.tcp.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("transport.tcp.compress")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http.cors.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("http.cors.allow-origin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cluster.initial_master_nodes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node-1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("discovery.seed_hosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.107"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#discovery.zen.ping.unicast.hosts: ["10.0.0.107:9300"]')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#discovery.zen.minimum_master_nodes: 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用脚本 默认painless")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cluster.routing.allocation.same_shard.host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# #超时时间")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("discovery.zen.ping_timeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 5s\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("discovery.zen.fd.ping_timeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 5s\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# #禁止自动创建索引")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("action.auto_create_index")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# # 一个集群中的N个节点启动后,才允许进行恢复处理 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#gateway.recover_after_nodes: 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# # 设置初始化恢复过程的超时时间,超时时间从上一个配置中配置的N个节点启动后算起 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#gateway.recover_after_time: 5m ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# # 设置这个集群中期望有多少个节点.一旦这N个节点启动(并且recover_after_nodes也符合), ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# # 线程池  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.search.size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.search.queue_size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# #xpack 插件的授权类型，basic是免费的，还有其他收费版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.license.self_generated.type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" basic\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# #是否开启安全验证")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.security.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# #是否开启远程访问安全验证")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.security.transport.ssl.enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.security.transport.ssl.verification_mode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" certificate\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# # 证书位置，该文件在下面流程会生成")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.security.transport.ssl.keystore.path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" certs/elastic"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("certificates.p12\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# # 证书位置，该文件在下面流程会生成")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("xpack.security.transport.ssl.truststore.path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" certs/elastic"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("certificates.p12\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br")])]),t("ul",[t("li",[s._v("创建elasticsearch用户")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("useradd elasticsearch\npasswd elasticsearch\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("修改目录权限")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("chown elasticsearch.elasticsearch -R /opt/elasticsearch-7.14.2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("切换用户启动es")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("su elasticsearch\ncd /opt/elasticsearch-7.14.2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("生成CA证书")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("bin/elasticsearch-certutil ca\nwarning: usage of JAVA_HOME is deprecated, use ES_JAVA_HOME\nThis tool assists you "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the generation of X.509 certificates and certificate\nsigning requests "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" use with SSL/TLS "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the Elastic stack.\n\nThe "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ca'")]),s._v(" mode generates a new "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'certificate authority'")]),s._v("\nThis will create a new X.509 certificate and private key that can be used\nto sign certificate when running "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cert'")]),s._v(" mode.\n\nUse the "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ca-dn'")]),s._v(" option "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" you wish to configure the "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'distinguished name'")]),s._v("\nof the certificate authority\n\nBy default the "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ca'")]),s._v(" mode produces a single PKCS"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#12 output file which holds:")]),s._v("\n    * The CA certificate\n    * The CA's private key\n\nIf you elect to generate PEM "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" certificates "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("the -pem option"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" the output will\nbe a "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" containing individual files "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the CA certificate and private key\n\nPlease enter the desired output "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elastic-stack-ca.p12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#直接回车即可,不用设置密码")]),s._v("\nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" elastic-stack-ca.p12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#直接回车即可,不用设置密码")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("在当前目录可以看到"),t("code",[s._v("elastic-stack-ca.p12")]),s._v("文件")]),s._v(" "),t("ul",[t("li",[s._v("生成密钥")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("bin/elasticsearch-certutil cert --ca elastic-stack-ca.p12\nwarning: usage of JAVA_HOME is deprecated, use ES_JAVA_HOME\nThis tool assists you "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the generation of X.509 certificates and certificate\nsigning requests "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" use with SSL/TLS "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the Elastic stack.\n\nThe "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cert'")]),s._v(" mode generates X.509 certificate and private keys.\n    * By default, this generates a single certificate and key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" use\n       on a single instance.\n    * The "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-multiple'")]),s._v(" option will prompt you to enter details "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" multiple\n       instances and will generate a certificate and key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" each one\n    * The "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-in'")]),s._v(" option allows "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the certificate generation to be automated by describing\n       the details of each instance "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a YAML "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n\n    * An instance is any piece of the Elastic Stack that requires an SSL certificate.\n      Depending on your configuration, Elasticsearch, Logstash, Kibana, and Beats\n      may all require a certificate and private key.\n    * The minimum required value "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" each instance is a name. This can simply be the\n      hostname, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" will be used as the Common Name of the certificate. A full\n      distinguished name may also be used.\n    * A filename value may be required "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" each instance. This is necessary when the\n      name would result "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" an invalid "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory name. The name provided here\n      is used as the directory name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("within the "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" and the prefix "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the key and\n      certificate files. The filename is required "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" you are prompted and the name\n      is not displayed "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the prompt.\n    * IP addresses and DNS names are optional. Multiple values can be specified as a\n      comma separated string. If no IP addresses or DNS names are provided, you may\n      disable "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),s._v(" verification "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" your SSL configuration.\n\n    * All certificates generated by this tool will be signed by a certificate authority "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CA"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      unless the --self-signed "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" line option is specified.\n      The tool can automatically generate a new CA "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" you, or you can provide your own with\n      the --ca or --ca-cert "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" line options.\n\nBy default the "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cert'")]),s._v(" mode produces a single PKCS"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#12 output file which holds:")]),s._v("\n    * The instance certificate\n    * The private key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the instance certificate\n    * The CA certificate\n\nIf you specify any of the following options:\n    * -pem "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PEM formatted output"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    * -keep-ca-key "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("retain generated CA key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    * -multiple "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("generate multiple certificates"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    * -in "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("generate certificates from an input "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" the output will be be a "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" containing individual certificate/key files\n\nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" CA "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("elastic-stack-ca.p12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接回车")]),s._v("\nPlease enter the desired output "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elastic-certificates.p12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接回车")]),s._v("\nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" elastic-certificates.p12 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接回车")]),s._v("\n\nCertificates written to /opt/elasticsearch-7.14.2/elastic-certificates.p12\n\nThis "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" should be properly secured as it contains the private key "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" \nyour instance.\n\nThis "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" is a self contained "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" and can be copied and used "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'as is'")]),s._v("\nFor each Elastic product that you wish to configure, you should copy\nthis "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.p12'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" to the relevant configuration directory\nand "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" follow the SSL configuration instructions "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the product guide.\n\nFor client applications, you may only need to copy the CA certificate and\nconfigure the client to trust this certificate.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br")])]),t("p",[s._v("在当前目录会生成"),t("code",[s._v("elastic-certificates.p12")]),s._v("文件")]),s._v(" "),t("ul",[t("li",[s._v("证书移动到指定目录")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在config目录下创建certs")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" config/certs\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 证书移动到certs目录")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" elastic-certificates.p12 config/certs/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("后台启动es")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/elasticsearch-7.14.2\nbin/elasticsearch -d\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("设置密码")])]),s._v(" "),t("blockquote",[t("p",[s._v("这里可以复制输入")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("bin/elasticsearch-setup-passwords interactive\nwarning: usage of JAVA_HOME is deprecated, use ES_JAVA_HOME\nInitiating the setup of passwords "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" reserved "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" elastic,apm_system,kibana,kibana_system,logstash_system,beats_system,remote_monitoring_user.\nYou will be prompted to enter passwords as the process progresses.\nPlease confirm that you would like to "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("continue")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("y\n\n\nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elastic"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elastic"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("apm_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("apm_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kibana_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kibana_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("logstash_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("logstash_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("beats_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("beats_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nEnter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote_monitoring_user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \nReenter password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote_monitoring_user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": \n\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("apm_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kibana_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kibana"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("logstash_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("beats_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote_monitoring_user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elastic"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("ul",[t("li",[s._v("验证")])]),s._v(" "),t("p",[s._v("浏览器访问"),t("code",[s._v("http://ip:9200/")]),s._v("，会提示输入账号密码，输入"),t("code",[s._v("elastic")]),s._v("账号与设置的密码登录即可")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node-1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cluster_name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dev-cluster"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cluster_uuid"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"J1_qbq7ZTcC7RC_9HIOJnw"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"number"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7.14.2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build_flavor"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build_type"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tar"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build_hash"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6bc13727ce758c0e943c3c21653b3da82f627f75"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build_date"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-09-15T10:18:09.722761972Z"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build_snapshot"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lucene_version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8.9.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"minimum_wire_compatibility_version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6.8.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"minimum_index_compatibility_version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6.0.0-beta1"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"tagline"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"You Know, for Search"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h1",{attrs:{id:"kibana安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana安装"}},[s._v("#")]),s._v(" Kibana安装")]),s._v(" "),t("h2",{attrs:{id:"kibana简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana简介"}},[s._v("#")]),s._v(" Kibana简介")]),s._v(" "),t("p",[s._v("Kibana是一个开源的基于浏览器的分析和可视化平台，可以用于搜索，查看，删除Elasticsearch索引并与存储在Elasticsearch索引中的数据进行交互。可以执行高级数据分析，并且以各种图标、表格和地图的形式可视化数据。")]),s._v(" "),t("h2",{attrs:{id:"kibana下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana下载"}},[s._v("#")]),s._v(" Kibana下载")]),s._v(" "),t("p",[s._v("下载地址："),t("a",{attrs:{href:"https://www.elastic.co/cn/downloads/past-releases#elasticsearch",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.elastic.co/cn/downloads/past-releases#elasticsearch"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("安装版本：7.14.2")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/03/10/wlAfxeWmIJ2DZFk.png",alt:"image-20230112095310874"}})]),s._v(" "),t("h2",{attrs:{id:"kibana安装-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana安装-2"}},[s._v("#")]),s._v(" Kibana安装")]),s._v(" "),t("ul",[t("li",[s._v("安装包移动到"),t("code",[s._v("/opt")]),s._v("目录")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" kibana-7.14.2-linux-x86_64 /opt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("解压")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" tar -zxvf kibana-7.14.2-linux-x86_64.tar.gz \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("修改配置文件")])]),s._v(" "),t("p",[t("code",[s._v("vi config/kibana.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server.host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.24.191"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.hosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://172.16.24.191:9200"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置支持中文")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("i18n.locale")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh-CN"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在es中设置kibana密码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.username")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kibana"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"设置的密码"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[s._v("修改权限")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" elasticsearch.elasticsearch -R kibana-7.14.2-linux-x86_64\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("启动")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" bin/kibana "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" kibana.log "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("查看进程")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" kibana\nelastic+ "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11336")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11288")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":09 pts/0    00:00:12 /opt/kibana-7.14.2-linux-x86_64/node/bin/node --preserve-symlinks-main --preserve-symlinks /opt/kibana-7.14.2-linux-x86_64/src/cli/dist\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("访问地址")])]),s._v(" "),t("p",[t("code",[s._v("http://ip:5601")])]),s._v(" "),t("p",[s._v("输入账号"),t("code",[s._v("elastic")]),s._v("，与设置的密码登录")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/03/10/ilSmnXz3BqgprOo.png",alt:"image-20230112144634650"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);