(window.webpackJsonp=window.webpackJsonp||[]).push([[292],{770:function(s,t,a){"use strict";a.r(t);var r=a(20),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("[toc]")]),s._v(" "),a("h2",{attrs:{id:"官方文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#官方文档"}},[s._v("#")]),s._v(" 官方文档")]),s._v(" "),a("p",[s._v("https://superset.apache.org/docs/databases/elasticsearch/")]),s._v(" "),a("h2",{attrs:{id:"elasticsearch-sql-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-sql-api"}},[s._v("#")]),s._v(" ElasticSearch(SQL API)")]),s._v(" "),a("p",[s._v("点击添加DATABASE")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/eX459plD3MykfPY.png",alt:"image-20231208132444605"}})]),s._v(" "),a("p",[s._v("选择ElasticSearch（SQL API）")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/9HcxS1rRsqkFJzh.png",alt:"image-20231208132508786"}})]),s._v(" "),a("p",[s._v("输入连接信息，并点击测试连接，右下角提示"),a("code",[s._v("Connection looks good!")]),s._v("则说明ElasticSearch连接成功")]),s._v(" "),a("p",[s._v("填写内容："),a("code",[s._v("elasticsearch+http://elastic:XXXXXXXXXX@10.0.0.107:9200/")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/pUJgwPzWVOdifGD.png",alt:"image-20231208132902725"}})]),s._v(" "),a("p",[s._v("设置时区")]),s._v(" "),a("blockquote",[a("p",[s._v("注意，如果设置时区统计结果不对，把设置时区这个动作取消！数据查询就恢复正常了")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/GQ1PaeJYquf5rdi.png",alt:"image-20231208141513820"}})]),s._v(" "),a("p",[s._v("添加成功后再列表中可以看到ElasticSearch")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/ZzVfG8eAodJLcWn.png",alt:"image-20231208133117846"}})]),s._v(" "),a("p",[s._v("创建ElasticSearch测试索引")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('PUT superset_test\n{\n  "settings":{\n    "number_of_shards":6,\n    "number_of_replicas":0\n  },\n  "mappings":{\n      "properties":{\n        "name":{\n          "type":"keyword"\n        },\n        "uid":{\n          "type":"keyword"\n        },\n        "age":{\n          "type":"integer"\n        }\n      }\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("添加三条测试数据")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("POST /superset_test/_doc\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"John"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"age"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"uid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123123123"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nPOST /superset_test/_doc\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jast"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"age"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"uid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\nPOST /superset_test/_doc\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jack"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"age"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"uid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h2",{attrs:{id:"创建dataset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建dataset"}},[s._v("#")]),s._v(" 创建DataSet")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/6JVsTA3nUMZpaBo.png",alt:"image-20231208133949237"}})]),s._v(" "),a("p",[s._v("选择需要查询的索引，并创建DataSet")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/XhQetC1rE2jOsdJ.png",alt:"image-20231208134038103"}})]),s._v(" "),a("p",[s._v("选择表格展示")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/vXHcf1sJQ4VPSFt.png",alt:"image-20231208134122839"}})]),s._v(" "),a("p",[s._v("选择字段，就可以基础查询了")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/DtHuBFN4sl8aKpj.png",alt:"image-20231208134343091"}})]),s._v(" "),a("p",[s._v("到此检查查询可以直接展示了")]),s._v(" "),a("h2",{attrs:{id:"统计数字显示为k转为数字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#统计数字显示为k转为数字"}},[s._v("#")]),s._v(" 统计数字显示为k转为数字")]),s._v(" "),a("p",[s._v("默认统计可能会显示数据是多少k")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/w5gGVvBti298Hln.png",alt:"image-20231208144058003"}})]),s._v(" "),a("p",[s._v("解决方法：")]),s._v(" "),a("p",[s._v("将Y轴设置为"),a("code",[s._v("Original value")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/wBHpOfAuCGNJvmq.png",alt:"image-20231208144153205"}})]),s._v(" "),a("h2",{attrs:{id:"表格展示-根据指定字段groupby后并按照日期统计每天总量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#表格展示-根据指定字段groupby后并按照日期统计每天总量"}},[s._v("#")]),s._v(" 表格展示：根据指定字段GroupBy后并按照日期统计每天总量")]),s._v(" "),a("h3",{attrs:{id:"最终显示数据效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最终显示数据效果"}},[s._v("#")]),s._v(" 最终显示数据效果")]),s._v(" "),a("p",[s._v("统计各数据来源每天的数据新增量")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/1I2askpRi9OQcUF.png",alt:"image-20231211094238058"}})]),s._v(" "),a("h3",{attrs:{id:"字段说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字段说明"}},[s._v("#")]),s._v(" 字段说明")]),s._v(" "),a("p",[s._v("release_time ： 数据时间")]),s._v(" "),a("p",[s._v("souce_type ： 数据类型")]),s._v(" "),a("h3",{attrs:{id:"配置方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("p",[s._v("创建时选择图表"),a("code",[s._v("Pivot Table")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/jkH3278Ix9bEYJn.png",alt:"image-20231211094659519"}})]),s._v(" "),a("h4",{attrs:{id:"设置time"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置time"}},[s._v("#")]),s._v(" 设置Time")]),s._v(" "),a("p",[s._v("选择需要统计的时间字段，设置为按天统计")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/Ptewc5foJXRK2kL.png",alt:"image-20231211094815885"}})]),s._v(" "),a("h4",{attrs:{id:"设置query"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置query"}},[s._v("#")]),s._v(" 设置Query")]),s._v(" "),a("h5",{attrs:{id:"设置统计列columns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置统计列columns"}},[s._v("#")]),s._v(" 设置统计列COLUMNS")]),s._v(" "),a("p",[s._v("因为我们"),a("code",[s._v("source_type")]),s._v("字段是字典值，所以在"),a("code",[s._v("CUSTOM SQL")]),s._v("中做了转换，输入内容如下")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CASE")]),s._v(" CAST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source_type "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" string "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源1'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源2'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源3'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源4'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'5'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源5'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'6'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源6'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'7'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源7'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'8'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源8'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'9'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源8'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源9'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'11'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源10'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'12'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源11'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'13'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源12'")]),s._v(" \n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ELSE")]),s._v(" CAST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source_type "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" string "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/WqjxucsX5peiAOY.png",alt:"image-20231211095119329"}})]),s._v(" "),a("h5",{attrs:{id:"设置行按天显示rows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置行按天显示rows"}},[s._v("#")]),s._v(" 设置行按天显示ROWS")]),s._v(" "),a("p",[s._v("选择我们统计的字段，按照这个时间字段统计，按行显示")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/xf9iKMzt24w1UJG.png",alt:"image-20231211095311682"}})]),s._v(" "),a("h5",{attrs:{id:"设置统计值metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置统计值metrics"}},[s._v("#")]),s._v(" 设置统计值METRICS")]),s._v(" "),a("p",[s._v("这里统计数量，使用COUNT即可")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/Peltgafz9LO2iTs.png",alt:"image-20231211095444247"}})]),s._v(" "),a("h5",{attrs:{id:"设置显示格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置显示格式"}},[s._v("#")]),s._v(" 设置显示格式")]),s._v(" "),a("p",[a("code",[s._v("APPLY METRICS ON")]),s._v("是设置显示形式，这里选择"),a("code",[s._v("COLUMNS")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/L5umGgcCwAsiTN6.png",alt:"image-20231211095530593"}})]),s._v(" "),a("h5",{attrs:{id:"设置过滤条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置过滤条件"}},[s._v("#")]),s._v(" 设置过滤条件")]),s._v(" "),a("p",[s._v("这里设置"),a("code",[s._v("release_time")]),s._v("为近30天的数据，"),a("code",[s._v("now-30d/d")]),s._v("表示近30天数据，这个是ElasticSearch语法。")]),s._v(" "),a("blockquote",[a("p",[s._v("这里做下简单介绍")]),s._v(" "),a("ol",[a("li",[s._v("相对时间查询：")])]),s._v(" "),a("p",[s._v("now：表示当前时间点。\nnow-1h：表示从当前时间向前推算的1小时。\nnow-2d：表示从当前时间向前推算的2天。\nnow-1w：表示从当前时间向前推算的1周。\nnow-1M：表示从当前时间向前推算的1个月。\nnow-1y：表示从当前时间向前推算的1年。")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("绝对时间查询：")])]),s._v(" "),a("p",[s._v("2021-09-01：表示指定的日期，不包括具体的时间。\n2021-09-01T10:00:00：表示指定的日期和时间。")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("查询方法")])]),s._v(" "),a("p",[s._v('{"range": {"timestamp": {"gte": "now-1d", "lt": "now"}}}：表示查询从过去一天内的数据，包括当前时间之前的数据。\n{"range": {"timestamp": {"gte": "2021-09-01", "lt": "2021-09-02"}}}：表示查询指定日期范围内的数据，不包括结束日期的数据。')]),s._v(" "),a("p",[s._v('{"range": {"timestamp": {"time_zone": "+08:00", "gte": "now-1h", "lte": "now"}}}：表示在指定的时间区间内进行查询，并指定时区。')]),s._v(" "),a("p",[s._v('{"bool": {"filter": {"range": {"timestamp": {"gte": "now-1h/h", "lte": "now/h"}}}}}：表示查询过去一小时内每个完整小时的数据。')])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/K9uTr1jGyte2ila.png",alt:"image-20231211095632125"}})]),s._v(" "),a("h5",{attrs:{id:"设置显示行数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置显示行数"}},[s._v("#")]),s._v(" 设置显示行数")]),s._v(" "),a("p",[s._v("这个数值计算方式是作用在每一个METRICS的指标下，"),a("code",[s._v("CELL LIMIT")]),s._v("如果想要显示完整，"),a("code",[s._v("CELL LIMIT")]),s._v("="),a("code",[s._v("source_type")]),s._v("所有枚举*天数，")]),s._v(" "),a("p",[s._v("这里为了方便我直接设置成1000")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/yYnTcS2gNoJ5mAK.png",alt:"image-20231211101147781"}})]),s._v(" "),a("h5",{attrs:{id:"设置显示为正常数字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置显示为正常数字"}},[s._v("#")]),s._v(" 设置显示为正常数字")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("CUSTOMIZE")]),s._v("中"),a("code",[s._v("VALUE FORMAT")]),s._v("设置为"),a("code",[s._v("Original valule")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/waZAez75Obdhqj4.png",alt:"image-20231211104807443"}})]),s._v(" "),a("p",[s._v("保存，最终展示结果如下")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/WXorwhK7av8M5Gt.png",alt:"image-20231211101833146"}})]),s._v(" "),a("h2",{attrs:{id:"折线图展示-根据指定字段groupby后并按照日期统计每天总量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#折线图展示-根据指定字段groupby后并按照日期统计每天总量"}},[s._v("#")]),s._v(" 折线图展示：根据指定字段GroupBy后并按照日期统计每天总量")]),s._v(" "),a("h3",{attrs:{id:"最终展示数据效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最终展示数据效果"}},[s._v("#")]),s._v(" 最终展示数据效果")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/LsGCxMc7Q2p59eU.png",alt:"image-20231211105135026"}})]),s._v(" "),a("h3",{attrs:{id:"配置方法-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-2"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("p",[s._v("设置为"),a("code",[s._v("Time-series Area Chart")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/dkSWOGrRBzxsjQE.png",alt:"image-20231211110053619"}})]),s._v(" "),a("h3",{attrs:{id:"设置time-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置time-2"}},[s._v("#")]),s._v(" 设置TIME")]),s._v(" "),a("p",[s._v("选择需要统计的时间字段，设置为按天统计")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/yvPtIeEaTNOdbS2.png",alt:"image-20231211110212246"}})]),s._v(" "),a("h5",{attrs:{id:"设置统计值metrics-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置统计值metrics-2"}},[s._v("#")]),s._v(" 设置统计值METRICS")]),s._v(" "),a("p",[s._v("这里统计数量，使用COUNT即可")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/PZJbQ6X4Lc1uvg9.png",alt:"image-20231211111605724"}})]),s._v(" "),a("h5",{attrs:{id:"设置dimensions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置dimensions"}},[s._v("#")]),s._v(" 设置DIMENSIONS")]),s._v(" "),a("p",[s._v("这个字段就是需要GroupBy的字段，通过"),a("code",[s._v("CASE WHEN")]),s._v(",将字典值转换为中文说明")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CASE")]),s._v(" CAST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source_type "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" string "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源1'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源2'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源3'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源4'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'5'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源5'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'6'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源6'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'7'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源7'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'8'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源8'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'9'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源8'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源9'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'11'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源10'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'12'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源11'")]),s._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'13'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'数据来源12'")]),s._v(" \n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ELSE")]),s._v(" CAST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source_type "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" string "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/4ms8LrxugSUb61l.png",alt:"image-20231211111706802"}})]),s._v(" "),a("h5",{attrs:{id:"设置过滤条件-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置过滤条件-2"}},[s._v("#")]),s._v(" 设置过滤条件")]),s._v(" "),a("p",[s._v("这里设置"),a("code",[s._v("release_time")]),s._v("为近30天的数据，"),a("code",[s._v("now-30d/d")]),s._v("表示近30天数据，这个是ElasticSearch语法。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/hiQ8mLyVNIRMlrc.png",alt:"image-20231211113022820"}})]),s._v(" "),a("h5",{attrs:{id:"设置显示为正常数字-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置显示为正常数字-2"}},[s._v("#")]),s._v(" 设置显示为正常数字")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("CUSTOMIZE")]),s._v("中"),a("code",[s._v("VALUE FORMAT")]),s._v("设置为"),a("code",[s._v("Original valule")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/96Wut8DblFLoTns.png",alt:"image-20231211113055477"}})]),s._v(" "),a("h5",{attrs:{id:"设置查询数据量row-limit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置查询数据量row-limit"}},[s._v("#")]),s._v(" 设置查询数据量ROW LIMIT")]),s._v(" "),a("p",[s._v("设置一共查询出来的数据量")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/VsymXEnepwDv9KO.png",alt:"image-20231211114002692"}})]),s._v(" "),a("p",[s._v("保存，最终展示结果如下")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/11/LsGCxMc7Q2p59eU.png",alt:"image-20231211105135026"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);