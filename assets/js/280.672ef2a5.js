(window.webpackJsonp=window.webpackJsonp||[]).push([[280],{758:function(a,t,s){"use strict";s.r(t);var n=s(20),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("[toc]")]),a._v(" "),s("h3",{attrs:{id:"场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#场景"}},[a._v("#")]),a._v(" 场景")]),a._v(" "),s("p",[a._v("集群：Ambari Hadoop")]),a._v(" "),s("p",[a._v("Spark：单独安装 3.2.1")]),a._v(" "),s("h3",{attrs:{id:"异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异常"}},[a._v("#")]),a._v(" 异常")]),a._v(" "),s("p",[a._v("提交 Spark 任务报错")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("Exception "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" thread "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"main"')]),a._v(" java.lang.NoClassDefFoundError: com/sun/jersey/api/client/config/ClientConfig\n        at org.apache.hadoop.yarn.client.api.TimelineClient.createTimelineClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("TimelineClient.java:55"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.createTimelineClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("YarnClientImpl.java:181"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.serviceInit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("YarnClientImpl.java:168"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.hadoop.service.AbstractService.init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("AbstractService.java:163"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.yarn.Client.submitApplication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Client.scala:175"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.scheduler.cluster.YarnClientSchedulerBackend.start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("YarnClientSchedulerBackend.scala:62"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.scheduler.TaskSchedulerImpl.start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("TaskSchedulerImpl.scala:220"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.SparkContext."),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("init"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkContext.scala:581"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.SparkContext$.getOrCreate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkContext.scala:2690"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.sql.SparkSession"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Builder")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$anonfun")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$getOrCreate")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSession.scala:949"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at scala.Option.getOrElse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Option.scala:189"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.sql.SparkSession"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Builder")]),a._v(".getOrCreate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSession.scala:943"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at com.avris.util.SparkContextHelper$.getContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkContextHelper.scala:59"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at com.avris.application.AttributesCreateLabelsApplication$.main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("AttributesCreateLabelsApplication.scala:41"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at com.avris.application.AttributesCreateLabelsApplication.main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("AttributesCreateLabelsApplication.scala"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at sun.reflect.NativeMethodAccessorImpl.invoke0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Native Method"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at sun.reflect.NativeMethodAccessorImpl.invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NativeMethodAccessorImpl.java:62"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("DelegatingMethodAccessorImpl.java:43"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at java.lang.reflect.Method.invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Method.java:498"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.JavaMainApplication.start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkApplication.scala:52"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit.org"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$apache")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$spark")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$deploy")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$SparkSubmit")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$$")]),a._v("runMain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:955"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit.doRunMain"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:180"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit.submit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:203"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit.doSubmit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:90"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$$")]),a._v("anon"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v(".doSubmit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:1043"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit$.main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:1052"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit.main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nCaused by: java.lang.ClassNotFoundException: com.sun.jersey.api.client.config.ClientConfig\n        at java.net.URLClassLoader.findClass"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("URLClassLoader.java:381"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at java.lang.ClassLoader.loadClass"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ClassLoader.java:424"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at sun.misc.Launcher"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$AppClassLoader")]),a._v(".loadClass"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Launcher.java:335"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at java.lang.ClassLoader.loadClass"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ClassLoader.java:357"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("27")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br")])]),s("h3",{attrs:{id:"解决方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[a._v("#")]),a._v(" 解决方法")]),a._v(" "),s("p",[a._v("在 yarn 配置中添加")]),a._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n\t    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("yarn.timeline-service.enabled"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("false"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\t\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);