(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{627:function(s,a,t){"use strict";t.r(a);var e=t(20),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("[toc]")]),s._v(" "),t("p",[s._v("集群设置密码后通过下面这两个方法都可以进行密码修改")]),s._v(" "),t("h2",{attrs:{id:"方法一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法一"}},[s._v("#")]),s._v(" 方法一")]),s._v(" "),t("p",[s._v("通过发送HTTP请求进行密码修改")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -XPOST -u elastic "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bigdata-01:9200/_security/user/elastic/_password"')]),s._v(" -H "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v(" -d"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"password" : "123456789"}\'')]),s._v("\nEnter "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'elastic'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入我们原密码")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("password:123456789 指定的是我们修改后的密码")]),s._v(" "),t("h2",{attrs:{id:"方法二"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法二"}},[s._v("#")]),s._v(" 方法二")]),s._v(" "),t("p",[s._v("当我们想通过"),t("code",[s._v("bin/elasticsearch-setup-passwords interactive")]),s._v("修改密码时，发现提示密码已经设置过了,没有办法再次设置。")]),s._v(" "),t("blockquote",[t("p",[s._v("tip:")]),s._v(" "),t("p",[s._v("echo -e 'y\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n'")]),s._v(" "),t("p",[s._v("这段命令是直接将987654当成密码设置，实现一行命令交互设置密码。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# echo -e 'y\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n' | bin/elasticsearch-setup-passwords interactive\nwarning: usage of JAVA_HOME is deprecated, use ES_JAVA_HOME\nFuture versions of Elasticsearch will require Java 11; your Java version from [/usr/local/src/jdk1.8.0_151/jre] does not meet this requirement. Consider switching to a distribution of Elasticsearch with a bundled JDK. If you are already using a distribution with a bundled JDK, ensure the JAVA_HOME environment variable is not set.\n\nFailed to authenticate user 'elastic' against http://172.31.0.8:9200/_security/_authenticate?pretty\nPossible causes include:\n * The password for the 'elastic' user has already been changed on this cluster\n * Your elasticsearch node is running against a different keystore\n   This tool used the keystore at /usr/hdp/3.1.5.0-152/elasticsearch/config/elasticsearch.keystore\n\nERROR: Failed to verify bootstrap password\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("删除"),t("code",[s._v(".security-7")]),s._v("索引之后，就可以继续使用上面命令进行密码设置了。")]),s._v(" "),t("p",[s._v("删除索引")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -X DELETE "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://bigdata-01:9200/.security-7"')]),s._v(" -u elastic:123456\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("重新设置密码，设置成功。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'y\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n987654\\n'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" bin/elasticsearch-setup-passwords interactive\nwarning: usage of JAVA_HOME is deprecated, use ES_JAVA_HOME\nFuture versions of Elasticsearch will require Java "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" your Java version from "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("/usr/local/src/jdk1.8.0_151/jre"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" does not meet this requirement. Consider switching to a distribution of Elasticsearch with a bundled JDK. If you are already using a distribution with a bundled JDK, ensure the JAVA_HOME environment variable is not set.\nInitiating the setup of passwords "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" reserved "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" elastic,apm_system,kibana,kibana_system,logstash_system,beats_system,remote_monitoring_user.\nYou will be prompted to enter passwords as the process progresses.\n\n\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("apm_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kibana_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kibana"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("logstash_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("beats_system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote_monitoring_user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nChanged password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("elastic"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);